{% extends 'base.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container shadow p-2 mb-5 bg-white rounded">
  <h5 class="card-header">Check Server Status</h5>
  <div class="card-body">
  <form method="POST">
    <div class="input-group mb-3">
      <input type="url" id="url" name="url" class="form-control" placeholder="https://www.google.com" aria-describedby="button-addon2">
        <div class="input-group-append">
          <button class="btn btn-outline-secondary" type="submit" id="button-addon2">Check</button>
        </div>
    </div>
  </form>
    <ul class="list-group" style="width:auto">
      <a class="list-group-item list-group-item-action active">
        <div class="d-flex w-100 justify-content-between">
          <h6 class="mb-1">{{ response[0] }} {% if response[3] == False %} is Online! üòÅ {% else %} is Offline! üòß {% endif %}</h6>
        </div>
      </a>  
      <li class="list-group-item"><a class="font-weight-bold">Checked URL:</a> <a class="text-dark" target="_tab" href="{{ response[0] }}">{{ response[0] }}</a></li>
      <li class="list-group-item"><a class="font-weight-bold">Response:</a> {{ response[2] }}</li>
      <li class="list-group-item"><a class="font-weight-bold">Response code:</a> {{ response[1] }}</li>
    </ul>
  </div>
</div>
<div class="container shadow p-2 mb-5 bg-white rounded">
    <h5 class="card-header">About</h5>
    <div class="card-body">
      <div>ServerMonitor checks if a site is down for everyone or only for you.
        If it is only down for you, this could have different reasons:
      </div>
      <li>Browser: Clear your browser cache with ctrl+shift+r.</li>
      <li>Router: Try to restart your router and try it again.</li>
      <li>DNS: Maybe your ISP blocks the domain. Change your DNS, to solve this problem.</li>
      <br>
      <h5>How does the ServerMonitor work:</h5>
    </div>
</div>
{% endblock %}

{% block leftcol %}
<div class="container shadow p-2 mb-5 bg-white rounded">
    <h5 class="card-header">Recent checked Websites</h5>
    {% for query in database_query %}
    <div class="card-body">
        <div class="card" style="width: auto;">
            {% if query.response_code == '200' %}
            <div class="card-header bg-success text-center">
            {% else %}
            <div class="card-header bg-danger text-center">
            {% endif %}
              {{ query.website_url }} {% if query.response_code == '200'%} is Online! {% else %} is Offline! {% endif %}
            </div>
            <ul class="list-group list-group-horizontal-xl flex-fill mx-auto border-0">
                <li class="list-group-item border-0">Date: {{ query.check_date.strftime("%d-%m-%Y, %H:%M:%S") }} UTC</li>
                <li class="list-group-item border-0">Code: {{ query.response_code }}</li>
                <li class="list-group-item border-0">Response: {{ query.response_message }}</li>
            </ul>
        </div>
    </div>
   {% endfor %}
</div>
{% endblock %}

