{% extends 'base.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container shadow-sm p-2 mb-5 bg-white rounded">
  <h5 class="card-header">Check Server Status</h5>
  <div class="card-body">
  <form method="POST">
    <div class="input-group mb-3">
      <input type="url" id="url" name="url" class="form-control" placeholder="https://www.google.com" aria-describedby="button-addon2" data-toggle="tooltip" data-placement="top" title="Your URL need a prefix like 'https://' or 'http://'">
        <div class="input-group-append">
          <button class="btn btn-outline-secondary" type="submit" id="button-addon2">Check</button>
        </div>
    </div>
  </form>
    <ul class="list-group" style="width:auto">
      <a class="list-group-item list-group-item-action list-group-item-success" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
        <div class="d-flex w-100 justify-content-between">
          <h6 class="mb-1"><img class="favicon" ng-src="https://www.inspiredprogrammer.com/favicon-32x32.png" src="https://www.inspiredprogrammer.com/favicon-16x16.png"> | {{ response[0] }} {% if response[3] == False %} is Online! 😁 {% else %} is Offline! 😧 {% endif %}</h6> <!--- TODO: Implement favicon -->
        </div>
      </a>  
      <li class="list-group-item"><a class="font-weight-bold">Checked URL:</a> <a class="text-dark" target="_tab" href="{{ response[0] }}">{{ response[0] }}</a></li>
      <li class="list-group-item"><a class="font-weight-bold">Response code:</a> <a target="_tab" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200" class="text-success font-weight-bold">{{ response[1] }}</a></li>
      <li class="list-group-item"><a class="font-weight-bold">Response:</a> {{ response[2] }}</li>
    </ul>
    <p></p>
    <div>
        <div class="collapse" id="collapseExample">
          <a class="font-weight-bold">Additional Information:</a>
            <ul class="list-group" style="width:auto">
                <li class="list-group-item"><a class="font-weight-bold">IP-Adress:</a> <a>{{ ip }}</a></li>
                <li class="list-group-item"><a class="font-weight-bold">Latency:</a> <a>120 ms</a></li>
                <li class="list-group-item"><a class="font-weight-bold">Server Location:</a> Germany 🇩🇪</li>
              </ul>
          </div>
    </div>
  </div>
</div>
<div class="container shadow-sm p-2 mb-5 bg-white rounded">
    <h5 class="card-header">What's that?</h5>
    <div class="card-body">

    </div>
</div>
{% endblock %}

{% block leftcol %}
<div class="container shadow-sm p-2 mb-5 bg-white rounded">
    <h5 class="card-header">Recent checked Websites</h5>
    {% for query in database_query %}
    <div class="card-body">
        <div class="card" style="width: auto;">
            {% if query.response_code == '200' %}
            <div class="card-header bg-success text-center">
            {% else %}
            <div class="card-header bg-danger text-center">
            {% endif %}
              {{ query.website_url }} {% if query.response_code == '200'%} is Online! {% else %} is Offline! {% endif %}
            </div>
            <ul class="list-group list-group-horizontal-xl flex-fill mx-auto border-0">
                <li class="list-group-item border-0">Date: {{ query.check_date.strftime("%d-%m-%Y, %H:%M:%S") }} UTC</li>
                <li class="list-group-item border-0">Code: {{ query.response_code }}</li>
                <li class="list-group-item border-0">Response: {{ query.response_message }}</li>
            </ul>
        </div>
    </div>
   {% endfor %}
</div>
{% endblock %}

